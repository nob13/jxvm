cmake_minimum_required(VERSION 3.4)
project(javaparser)

set (LIBS)

find_package(Boost 1.50 REQUIRED COMPONENTS iostreams filesystem system thread)
include_directories(${Boost_INCLUDE_DIRS})
set (LIBS ${LIBS} ${Boost_LIBRARIES})

include (FindPkgConfig)
pkg_check_modules(LIBZIP REQUIRED libzip)

set (LIBS ${LIBS} ${LIBZIP_LIBRARIES})
message (STATUS "Libraries:            ${LIBS}")
message (STATUS "libzip library:       ${LIBZIP_LIBRARIES}")
message (STATUS "libzip include dirs:  ${LIBZIP_INCLUDE_DIRS}")
include_directories(${LIBZIP_INCLUDE_DIRS})
link_directories(${LIBZIP_LIBRARY_DIRS})

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

#Library
include_directories(lib)
add_subdirectory(lib)
message (STATUS "Libraries: ${LIBS}")
set (LIBS ${LIBS} jxlib)

#app(s)
add_subdirectory(apps)

#Tests
add_subdirectory(cmake/external/gtest)
add_subdirectory(test)

# Copy Java Runtime Override
# Note: files need to be generated by Ant first
file(COPY javalib/build/jar/main.jar DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/lib)
file(COPY javalib/build/jar/test.jar DESTINATION ${CMAKE_CURRENT_BINARY_DIR}/lib)
